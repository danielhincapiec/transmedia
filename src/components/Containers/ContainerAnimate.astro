---
const { class: customClass = "", style: customStyle = "" } = Astro.props;
---

<div class={`container ${customClass}`} style={customStyle}>
	<slot />
</div>

<style>
	.container {
		max-width: 1380px;
		padding-left: var(--page-gap);
		padding-right: var(--page-gap);
		margin-left: auto;
		margin-right: auto;

		&.full {
			max-width: none;
		}

		&.wide {
			max-width: var(--container-5xl);
		}
	}
	[data-animate] {
		perspective: 2000px;
		transform-style: preserve-3d;
		will-change: transform, opacity, filter;
	}
</style>

<script>
	import { gsap } from "gsap";
	import { ScrollTrigger } from "gsap/ScrollTrigger";

	gsap.registerPlugin(ScrollTrigger);

	// Configuración inicial de los elementos animables
	const elementos = document.querySelectorAll("[data-animate]");

	elementos.forEach((el) => {
		// Estado inicial: oculto, borroso, con perspectiva
		gsap.set(el, {
			opacity: 0.5,
			filter: "blur(1px)",
			scale: 0.95,
			y: 100,
		});

		// Animación al entrar al viewport
		gsap.to(el, {
			opacity: 1,
			filter: "blur(0px)",
			scale: 1,
			y: 0,
			duration: 1,
			ease: "power3.out",
			scrollTrigger: {
				trigger: el,
				start: "top 80%",
				end: "bottom top",
				toggleActions: "play reverse play reverse",
				// markers: true,
			},
		});
	});
</script>
